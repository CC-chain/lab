[control_plane]
%{ for ip in control_plane_ips ~}
k8s-${env_name}-cp-${index(control_plane_ips, ip) + 1} ansible_host=${ip}
%{ endfor ~}

[workers]
%{ for ip in worker_ips ~}
k8s-${env_name}-worker-${index(worker_ips, ip) + 1} ansible_host=${ip}
%{ endfor ~}

[k8s_all:children]
control_plane
workers

[k8s_all:vars]
ansible_user=${ssh_user}
ansible_ssh_private_key_file=${ssh_key}
env_name=${env_name}